# see domain-specific .yml for documentation
wu:
  image: systemapic/wu:latest
  environment:
    SYSTEMAPIC_DOMAIN: ${SYSTEMAPIC_DOMAIN}
    SYSTEMAPIC_PRODMODE: 'true'
  working_dir: /systemapic/prod # todo: remove (currently needed for doing `docker run ../... grunt test`, but can be fixed with `./test.sh` script, or something better)
  volumes:
    - ../../modules/wu:/systemapic/dev
    - ../../config/${SYSTEMAPIC_DOMAIN}:/systemapic/config

pile: 
  image: systemapic/pile:latest
  environment:
    SYSTEMAPIC_DOMAIN: ${SYSTEMAPIC_DOMAIN}
    SYSTEMAPIC_PRODMODE: 'true'
  mem_limit: 10000000000
  volumes:
    - ../../config/${SYSTEMAPIC_DOMAIN}:/systemapic/config
    - ../../modules/pile:/systemapic/dev

nginx:
  image: systemapic/nginx:latest
  volumes:
    - ../../config/${SYSTEMAPIC_DOMAIN}:/systemapic/config

redis:
  image: redis:latest
  volumes:
    - ../../config/${SYSTEMAPIC_DOMAIN}:/systemapic/config

mongo: 
  image: systemapic/mongo:latest
  volumes:
    - ../../config/${SYSTEMAPIC_DOMAIN}:/systemapic/config

postgis:
  # image: systemapic/postgis:latest
  image: systemapic/postgis:latest
  volumes:
    - ../../config/${SYSTEMAPIC_DOMAIN}:/systemapic/config
